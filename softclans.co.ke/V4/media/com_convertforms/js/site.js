function _createForOfIteratorHelperLoose(e,t){var r,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),r=0,function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _createForOfIteratorHelperLoose(e,t){var r,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),r=0,function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}!function(o,n){"use strict";var a=null,i={getOption:function(e,t){t=void 0===t?"":t;var r=this.getJoomlaOption("com_convertforms");return r&&void 0!==r[e]?r[e]:t},text:function(e,t){t=void 0===t?"":t;var r=this.getJoomlaOption("joomla.jtext");return void 0!==r[e]?r[e]:t},getJoomlaOption:function(e,t){if(!a){var r=n.querySelector(".joomla-script-options");if(!r)return;a=JSON.parse(r.text||r.textContent)}return void 0!==a[e]?a[e]:t},getCSRFToken:function(){return this.getJoomlaOption("csrf.token")},getBaseURL:function(e){var t=this.getOption("baseURL","/index.php?option=com_convertforms");return e&&void 0!==e&&(t=t+(-1<t.indexOf("?")?"&":"?")+e),this.emitEvent("ConvertFormsGetBaseURL",n,{url:t}).detail.url},getFormData:function(e){for(var t=new FormData(e),r=new FormData,o=_createForOfIteratorHelperLoose(t);!(n=o()).done;){var n=n.value,a=n[0],n=n[1],i=e.querySelector('.cf-input[name="'+a+'"]');i&&i.closest(".cf-control-group.cf-ignore")||r.append(a,n)}return r},serializeFormData:function(e,t){t=t||!1;for(var r=[],o=_createForOfIteratorHelperLoose(e.entries());!(a=o()).done;){var n,a=a.value,i=a[0],a=a[1];t&&-1<i.indexOf("cf[")&&(n=-1<i.indexOf("[]"),i=i.match(/cf\[(.*?)\]/)[1],n)&&(i+="[]"),r.push(encodeURIComponent(i)+"="+encodeURIComponent(a))}return r.join("&")},isInViewport:function(e){e=e.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(o.innerHeight||n.documentElement.clientHeight)&&e.right<=(o.innerWidth||n.documentElement.clientWidth)},emitEvent:function(e,t,r){e=new CustomEvent(e,{detail:r,cancelable:!0});return t.dispatchEvent(e),e},request:function(t){t=i.extend({url:"",method:"POST",headers:null,data:null,onSuccess:null,onError:null,onFail:null},t);try{var r=new XMLHttpRequest;if(r.open(t.method,t.url,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-Ajax-Engine","Convert Forms!"),t.headers)for(var e in t.headers)t.headers.hasOwnProperty(e)&&r.setRequestHeader(e,t.headers[e]);if(r.onload=function(){4===r.readyState&&(200===r.status?t.onSuccess&&t.onSuccess.call(o,r.responseText,r):t.onError&&t.onError.call(o,r.responseText,r),t.onComplete)&&t.onComplete.call(o,r)},t.onBefore&&!1===t.onBefore.call(o,r))return r;r.send(t.data)}catch(e){return t.onFail&&t.onFail.call(o,e,r),console.error(e),!1}return r},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},capitalize:function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},browserIsIE:function(){var e=o.navigator.userAgent,t=e.indexOf("MSIE "),e=e.indexOf("Trident/");return 0<t||0<e},loadScript:function(e,t){var r=n.head,o=n.createElement("script");o.type="text/javascript",o.src=e,o.onreadystatechange=t,o.onload=t,r.appendChild(o)},onReady:function(e){"loading"!=n.readyState?e(n.querySelectorAll("div.convertforms")):n.addEventListener("DOMContentLoaded",function(){e(n.querySelectorAll("div.convertforms"))})},toggleCheck:function(e,t){var r;e&&(r=!1,!e.checked&&t&&(r=e.checked=!0),r=e.checked&&!t?!(e.checked=!1):r)&&i.emitChange(e)},setValue:function(e,t){e.value!=t&&(e.value=t,e.value===t)&&i.emitChange(e)},emitChange:function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}};o.ConvertForms=o.ConvertForms||[],o.ConvertForms.Helper=i}(window,document),function(f,d){"use strict";var o=function(o){var c={selector:o},l=f.ConvertForms.Helper,u=o.querySelector("form");c.getFormData=function(){var e,t=l.getFormData(u),r=[];return o.querySelectorAll(".cf-control-group.cf-ignore").forEach(function(e){r.push(e.dataset.key)}),r.length&&(e={ignore:r},Object.keys(e).length)&&t.set("overrides",JSON.stringify(e)),t},c.submit=function(){var e;o.classList.contains("cf-working")||((e=c.emitEvent("beforeSubmit")).defaultPrevented?e.detail.hasOwnProperty("error")&&c.throwError(e.detail.error):l.request({url:l.getBaseURL("task=submit"),headers:{"X-CSRF-Token":l.getCSRFToken()},data:c.getFormData(),onBefore:function(){o.classList.add("cf-working"),o.classList.add("cf-disabled"),o.classList.remove("cf-error"),o.classList.remove("cf-success"),o.querySelector(".cf-response").removeAttribute("role")},onSuccess:function(t,e){try{t=JSON.parse(t)}catch(e){var r=t.match('{"convertforms"(.*?)}$');if(null==r)return void c.throwError(c.text("INVALID_RESPONSE")+": "+t);t=JSON.parse(r[0])}t.success?(c.emitEvent("success",{response:t,xhr:e}),r="formTask"+l.capitalize(t.task),c.hasOwnProperty(r)?(c[r].call(f,t),c.emitEvent("afterTask",{response:t,xhr:e,task:t.task})):c.throwError(c.text("INVALID_TASK")+": "+r)):(c.emitEvent("error",{response:t,xhr:e}),c.throwError(t.error),(r=o.querySelector(".cf-fields .cf-input"))&&r.focus())},onComplete:function(e){c.emitEvent("afterSubmit",{xhr:e}),o.classList.remove("cf-working","cf-disabled"),l.isInViewport(o)||o.scrollIntoView()},onError:function(e,t){c.throwError("Error: "+e)},onFail:function(e,t){c.throwError("Fail: "+e)}}))},c.emitEvent=function(e,t,r){if(e)return(t=t||{}).instance=c,(r=r||!0)&&(r="ConvertForms"+l.capitalize(e),l.emitEvent(r,d,t)),l.emitEvent(e,o,t)},c.formTaskMsg=function(e){o.classList.add("cf-success"),o.querySelector(".cf-response").innerHTML=e.value,"1"==e.resetform&&u.reset()},c.formTaskUrl=function(e){var t=e.value;if("2"!==e.passdata&&("1"==e.passdata&&(r=l.getFormData(u),r=l.serializeFormData(r,!0),t+=(-1<e.value.indexOf("?")?"&":"?")+r),r=c.emitEvent("beforeRedirectUser",{url:t}),f.location.href=r.detail.url),"2"==e.passdata){var r=c.emitEvent("beforeRedirectUser",{url:t}),o=d.createElement("form");o.action=r.detail.url,o.method="POST",o.style="display:none; position:absolute; top:-100000px; left:-100000px";for(var n=_createForOfIteratorHelperLoose(l.getFormData(u).entries());!(i=n()).done;){var a,i=i.value,s=i[0],i=i[1];-1<s.indexOf("cf[")&&(a=-1<s.indexOf("[]"),s=s.match(/cf\[(.*?)\]/)[1],a&&(s+="[]"),(a=d.createElement("input")).type="hidden",a.name=s,a.value=i,o.appendChild(a))}d.body.appendChild(o),o.submit()}},c.throwError=function(e){o.classList.add("cf-error");var t=o.querySelector(".cf-response");t.innerHTML=e,t.setAttribute("role","alert")},c.text=function(e){return ConvertForms.Helper.text("COM_CONVERTFORMS_"+e)};return o.classList.contains("cf-init")||(f.IntersectionObserver&&new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(c.emitEvent("impression",{entry:e}),t.unobserve(e.target))})},{rootMargin:"0px 0px 0px 0px"}).observe(o),u.addEventListener("submit",function(e){e.preventDefault(),c.submit(e)}),o.classList.add("cf-init")),o.ConvertForms=c},n=(f.ConvertForms=f.ConvertForms||[],f.ConvertForms.Helper);function e(){for(var e=d.querySelectorAll(".convertforms.cf"),t=0;t<e.length;t++){var r=e[t];o(r)}n.emitEvent("ConvertFormsInit",d,e)}n.onReady(function(){n.browserIsIE()?n.loadScript("https://polyfill.io/v3/polyfill.min.js?ua=Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko&features=String.prototype.includes%2CElement.prototype.closest%2CCustomEvent%2CNodeList.prototype.forEach%2CObject.values%2CString.prototype.startsWith%2CString.prototype.endsWith",function(){n.loadScript("https://cdn.jsdelivr.net/npm/formdata-polyfill@3.0.20/formdata.min.js",e)}):e()})}(window,document);

